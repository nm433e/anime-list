<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jikan Anime List App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" href="favicon.png" type="image/png">
</head>

<body>

    <h1>My Anime List</h1>

    <div class="mode-switcher">
        <button id="inputModeBtn" class="active">List Mode</button>
        <button id="searchModeBtn">Search Mode</button>
        <button id="batchModeBtn">Batch Mode</button>
        <button id="hideModeBtn">Hidden Mode</button>
    </div>

    <div id="inputModeSection" class="mode-section">
        <h2>Add Anime from List</h2>
        <p>Paste anime names or IDs, one per line.</p>
        <textarea id="animeInputList" rows="10" cols="50" placeholder="Enter anime names or IDs here..."></textarea>
        <button id="processInputBtn">Process List</button>
        <div id="inputStatus" class="status-area"></div>
    </div>

    <div id="searchModeSection" class="mode-section hidden">
        <h2>Search and Add Anime</h2>
        <p>Type an anime name to search.</p>
        <input type="text" id="animeSearchInput" placeholder="Search for an anime...">
        <div id="searchResultsDropdown" class="dropdown-results">
        </div>
    </div>

    <div id="batchModeSection" class="mode-section hidden">
        <h2>Batch Add Anime by Season Interval</h2>
        <div class="batch-controls">
            <div class="batch-group">
                <label for="batchStartSeason">Start Season</label>
                <select id="batchStartSeason">
                    <option value="Winter">Winter</option>
                    <option value="Spring">Spring</option>
                    <option value="Summer">Summer</option>
                    <option value="Fall">Fall</option>
                </select>
                <input type="number" id="batchStartYear" min="1900" max="2100" placeholder="Year">
            </div>
            <span style="align-self: flex-end;">to</span>
            <div class="batch-group">
                <label for="batchEndSeason">End Season</label>
                <select id="batchEndSeason">
                    <option value="Winter">Winter</option>
                    <option value="Spring">Spring</option>
                    <option value="Summer">Summer</option>
                    <option value="Fall">Fall</option>
                </select>
                <input type="number" id="batchEndYear" min="1900" max="2100" placeholder="Year">
            </div>
            <div class="batch-group">
                <label for="initialPage">Initial Page</label>
                <input type="number" id="initialPage" min="1" placeholder="1">
            </div>
            <div class="batch-group">
                <label for="finalPage">Final Page</label>
                <input type="number" id="finalPage" min="1" placeholder="4">
            </div>
            <div class="batch-group" style="align-self: flex-end;">
                <label style="font-weight: normal;">
                    <input type="checkbox" id="batchMinMembersCheckbox"> Only add anime with at least 1000 members
                </label>
            </div>
            <button id="batchFetchBtn">Fetch & Add Batch</button>
        </div>
        <div id="batchStatus" class="status-area"></div>
    </div>
    <div class="anime-list-section">
        <div class="list-actions">
            <button id="clearListBtn" class="clear-btn">Clear List</button>
            <button id="exportListBtn" class="export-btn">Export List</button>
            <label for="importListInput" class="import-btn">Import List
                <input class="import-btn" type="file" id="importListInput" accept=".json" style="display: none;">
            </label>
            <div class="filter-buttons-inline">
                <button id="applyFiltersBtn">Apply Filters</button>
                <button id="resetFiltersBtn">Reset Filters</button>
                <button id="previousYearBtn"><i class="fa-solid fa-arrow-left"></i></button>
                <button class="year-season-btn">Year</span>
                <button id="nextYearBtn"><i class="fa-solid fa-arrow-right"></i></button>
                <button id="previousSeasonBtn"><i class="fa-solid fa-arrow-left"></i></button>
                <button class="year-season-btn">Season</span>
                <button id="nextSeasonBtn"><i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <!-- <h3>Filters</h3> -->
            <div class="filter-row">
                <div class="filter-group">
                    <label for="minScore">Min Score</label>
                    <input type="number" id="minScore" min="0" max="10" step="0.1" placeholder="0">
                </div>
                <div class="filter-group">
                    <label for="maxScore">Max Score</label>
                    <input type="number" id="maxScore" min="0" max="10" step="0.1" placeholder="10">
                </div>
                <div class="filter-group">
                    <label for="minMembers">Min Members</label>
                    <input type="number" id="minMembers" min="0" placeholder="0">
                </div>
                <div class="filter-group">
                    <label for="maxMembers">Max Members</label>
                    <input type="number" id="maxMembers" min="0" placeholder="1000000">
                </div>
                <div class="filter-group">
                    <label for="yearFilter">Year</label>
                    <input type="number" id="yearFilter" min="1900" max="2100" placeholder="Year">
                </div>
                <div class="filter-group">
                    <label for="seasonFilter">Season</label>
                    <select id="seasonFilter">
                        <option value="">All Seasons</option>
                        <option value="Winter">Winter</option>
                        <option value="Spring">Spring</option>
                        <option value="Summer">Summer</option>
                        <option value="Fall">Fall</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="statusFilter">Status</label>
                    <select id="statusFilter">
                        <option value="">All</option>
                        <option value="added">Added to List</option>
                        <option value="not-added">Not Added</option>
                    </select>
                </div>
            </div>
            <div class="genre-row">
                <div class="genre-filter-mode">
                    <label for="genreFilterModeInclusive">
                        <input type="radio" id="genreFilterModeInclusive" name="genreFilterMode" value="inclusive" checked>
                        Include Any Selected (Default)
                    </label>
                    <label for="genreFilterModeAll">
                        <input type="radio" id="genreFilterModeAll" name="genreFilterMode" value="all_selected">
                        Include All Selected
                    </label>
                    <label for="genreFilterModeNone">
                        <input type="radio" id="genreFilterModeNone" name="genreFilterMode" value="none_selected">
                        Exclude All Selected
                    </label>
                </div>
                <div id="genreFilterList" class="genre-filter-list"></div>
            </div>
        </div>

        <table id="animeTable">
            <thead>
                <tr>
                    <th class="number-column">#</th>
                    <th data-sort-by="name">Name</th>
                    <th data-sort-by="seasonYear">Season & Year</th>
                    <th data-sort-by="members">Members</th>
                    <th data-sort-by="score">Score</th>
                    <th data-sort-by="episodes">Ep</th>
                    <th>Genres</th>
                    <th class="actions-column" style="min-width: 100px;">Actions</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <p id="emptyListMessage">Your list is empty.</p>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Anime Entry</h2>
            <p>Enter the new MAL ID for this anime:</p>
            <input type="number" id="newAnimeId" placeholder="Enter MAL ID">
            <button id="confirmEdit">Update</button>
            <div id="editStatus" class="status-area"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>